(function(g){var window=this;'use strict';var B1k=function(l,M){if(!Number.isFinite(l))return String(l);l=String(l);var Z=l.indexOf(".");Z===-1&&(Z=l.length);var P=l[0]==="-"?"-":"";P&&(l=l.substring(1));return P+(0,g.tXq)("0",Math.max(0,M-Z))+l},kc0=function(){return{W:"svg",
Y:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},L:[{W:"path",Y:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}}]}},bBp=function(){return{W:"svg",
Y:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},L:[{W:"path",Y:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]}},a0P=function(l){typeof l==="number"?(this.date=wpo(l,0,1),T$(this,1)):g.MO(l)?(this.date=wpo(l.getFullYear(),l.getMonth(),l.getDate()),T$(this,l.getDate())):(this.date=new Date(g.GT()),l=this.date.getDate(),
this.date.setHours(0),this.date.setMinutes(0),this.date.setSeconds(0),this.date.setMilliseconds(0),T$(this,l))},wpo=function(l,M,Z){M=new Date(l,M,Z);
l>=0&&l<100&&M.setFullYear(M.getFullYear()-1900);return M},T$=function(l,M){l.getDate()!=M&&l.date.setUTCHours(l.date.getUTCHours()+(l.getDate()<M?1:-1))},y7=function(l,M){g.ie.call(this,l,{W:"div",
B:"ytp-reminder-menu",Y:{role:"menu",tabindex:"-1"},L:[{W:"div",B:"ytp-reminder-menu-contents",L:[{W:"div",B:"ytp-reminder-menu-items"}]}]},100,!0);this.U=M;this.K=[];this.menuPopupRenderer=void 0;this.items=this.I3("ytp-reminder-menu-items");this.hide()},LFO=function(l){return(l.menuPopupRenderer&&l.menuPopupRenderer.items||[]).reduce(function(M,Z){Z&&Z.menuServiceItemRenderer&&M.push(Z.menuServiceItemRenderer);
return M},[])},ES=function(l){g.q.call(this,{W:"div",
L:[{W:"button",kC:["ytp-offline-slate-button","ytp-button"],L:[{W:"div",B:"ytp-offline-slate-button-icon",b1:"{{icon}}"},{W:"div",B:"ytp-offline-slate-button-text",b1:"{{text}}"}]}]});this.S=l;this.upcomingEventReminderButtonRenderer=this.toggleButtonRenderer=null;this.T=void 0;this.X=this.U=null;(this.j=this.I3("ytp-offline-slate-button"))&&this.G(this.j,"click",this.J);this.hide()},tNs=function(l,M,Z){!l.toggleButtonRenderer&&M&&M.toggleButtonRenderer?l.toggleButtonRenderer=M.toggleButtonRenderer:
M&&M.toggleButtonRenderer||(l.toggleButtonRenderer=null);
!l.upcomingEventReminderButtonRenderer&&Z&&g.u(Z,dZo)?l.upcomingEventReminderButtonRenderer=g.u(Z,dZo):Z&&g.u(Z,dZo)||(l.upcomingEventReminderButtonRenderer=null);xS(l)},xS=function(l){if(l.toggleButtonRenderer){var M=l.toggleButtonRenderer;
if(M.isToggled){var Z=M.toggledText?g.yd(M.toggledText):"";l.update({text:Z,icon:Azl(M.toggledIcon)})}else Z=M.defaultText?g.yd(M.defaultText):"",l.update({text:Z,icon:Azl(M.defaultIcon)});l.show()}else l.upcomingEventReminderButtonRenderer?(M=DZl(l))?(Z=M.text?g.yd(M.text):"",l.update({text:Z,icon:Azl(M.icon)}),l.show()):l.hide():l.hide()},j_q=function(l,M,Z){l.X||(l.X=new g.Hv(l.S.C().CG));
var P={context:g.nM(l.X.config_||g.mM())};g.wn()&&(P.context.clientScreenNonce=g.wn());P.params=Z;g.Jh(l.X,M,P,{timeout:5E3,onSuccess:function(){l.upcomingEventReminderButtonRenderer&&l.T&&(l.upcomingEventReminderButtonRenderer.currentState=l.T,l.T=void 0)},
onError:function(){f0s(l)},
onTimeout:function(){f0s(l)}})},f0s=function(l){l.toggleButtonRenderer?(l.toggleButtonRenderer.isToggled=!l.toggleButtonRenderer.isToggled,xS(l)):l.upcomingEventReminderButtonRenderer&&(l.T=void 0,xS(l))},Azl=function(l){if(!l)return null;
switch(l.iconType){case "NOTIFICATIONS":return kc0();case "NOTIFICATIONS_NONE":return bBp();case "NOTIFICATIONS_ACTIVE":return g.wD();default:return null}},DZl=function(l){if(!l.upcomingEventReminderButtonRenderer)return null;
var M=l.T||l.upcomingEventReminderButtonRenderer.currentState;l=g.v(l.upcomingEventReminderButtonRenderer.states||[]);for(var Z=l.next();!Z.done;Z=l.next())if((Z=g.u(Z.value,VNE))&&Z.state===M&&Z.button&&g.u(Z.button,g.W8))return g.u(Z.button,g.W8);return null},uk0=function(l){g.q.call(this,{W:"div",
B:"ytp-offline-slate",L:[{W:"div",B:"ytp-offline-slate-background"},{W:"div",B:"ytp-offline-slate-bar",L:[{W:"span",B:"ytp-offline-slate-icon",L:[{W:"svg",Y:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},L:[{W:"path",Y:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{W:"circle",Y:{cx:"12",cy:"12",r:"3"}}]}]},{W:"span",B:"ytp-offline-slate-messages",L:[{W:"div",B:"ytp-offline-slate-main-text",Y:{"aria-label":"{{label}}"},b1:"{{mainText}}"},{W:"div",B:"ytp-offline-slate-subtitle-text",b1:"{{subtitleText}}"}]},{W:"span",B:"ytp-offline-slate-buttons"}]},{W:"button",kC:["ytp-offline-slate-close-button","ytp-button"],L:[g.oL()]},{W:"button",kC:["ytp-offline-slate-open-button","ytp-button"],L:[g.KZ()]}]});var M=this;this.api=l;this.U=this.T=null;this.background=this.I3("ytp-offline-slate-background");
this.K=this.I3("ytp-offline-slate-bar");this.j=new g.lR(function(){g.eW(M.K,"ytp-offline-slate-bar-fade")},15E3);
this.J=!1;this.X=new g.lR(function(){g.eW(M.element,"ytp-offline-slate-collapsed")},15E3);
g.f(this,this.X);g.f(this,this.j);this.countdownTimer=new g.lR(this.BT,1E3,this);this.G(l,"presentingplayerstatechange",this.fN);this.G(l,"livestatedata",this.Ga);this.G(this.I3("ytp-offline-slate-close-button"),"click",function(){g.eW(M.element,"ytp-offline-slate-collapsed")});
this.G(this.I3("ytp-offline-slate-open-button"),"click",function(){g.m0(M.element,"ytp-offline-slate-collapsed")});
this.hide();l=this.getVideoData();l.getPlayerResponse()&&(l=l.getPlayerResponse().playabilityStatus)&&this.Ga(l);l=this.api.getPresentingPlayerType()===8&&!this.getVideoData().Dv;var Z=this.api.getPresentingPlayerType()===8;g.sg(this.element,"ytp-offline-slate-premiere-trailer",l);g.sg(this.element,"ytp-offline-slate-hide-background",Z)},ppl=function(l,M,Z){if(M){var P=M.subtitleText!=null?g.yd(M.subtitleText):"";
Z=Z?Z:M.mainText!=null?g.yd(M.mainText):"";var H,J,S,O;M=(O=(H=M.mainText)==null?void 0:(J=H.accessibility)==null?void 0:(S=J.accessibilityData)==null?void 0:S.label)!=null?O:Z;l.update({mainText:Z,subtitleText:P,label:M});g.sg(l.element,"ytp-offline-slate-single-text-line",!P);g.sg(l.K,"ytp-offline-slate-bar-hidden",!Z&&!P)}},KD=function(l,M){var Z=(0,g.h)();
this.trigger=l;this.U=M;this.K=Z},WFl=function(l){g.v5.call(this,l);
var M=this;this.J=!1;this.Z=0;this.V=!1;this.T=new g.lR(function(){hhT(M)},0);
this.U=this.heartbeatParams=null;this.X=!1;this.j=new g.uT(1E3,6E4,1);this.sequenceNumber=0;this.offlineSlate=null;this.EE=new g.Hv(void 0);this.attestationResponse=Promise.resolve(void 0);this.D=Promise.resolve(void 0);this.utcOffsetMinutes=-(new a0P).getTimezoneOffset();this.K=new g.FG(this);g.f(this,this.T);g.f(this,this.K);qHo(this);FFO(this);this.K.G(l,"heartbeatparams",this.l2);this.K.G(l,"presentingplayerstatechange",this.uT);this.K.G(l,"videoplayerreset",this.Xv);this.K.G(l,g.nx("heartbeat"),
this.onCueRangeEnter);this.X&&this.U&&Q_o(this,void 0,this.U);var Z=new g.Iz(1E3,0x7ffffffffffff,{priority:1,namespace:"heartbeat"}),P=new g.Iz(0x8000000000000,0x8000000000000,{id:"stream_end",priority:1,namespace:"heartbeat"});l.Rf([Z,P]);iBl(this)},iBl=function(l){var M=l.getVideoData();
!M.N("use_rta_for_player")&&M.g7&&(M=M.botguardData)&&g.rw(M,l.player.C())},UZl=function(l){var M,Z;
return g.t(function(P){if(P.T==1)return g.L(P,g.LIg(),2);if(!P.U)return l.sequenceNumber>=3?P.return({error:"ATTESTATION_ERROR_VM_INTERNAL_ERROR"}):P.return(void 0);M=l.getVideoData();Z={};return P.return(g.agK((Z.cpn=M.clientPlaybackNonce,Z.encryptedVideoId=M.videoId||"",Z),1500))})},qHo=function(l){var M=l.getVideoData();
if(M.g7)if(M.N("use_rta_for_player"))l.attestationResponse=UZl(l);else if(M=new g.VTg(M),g.i9.isInitialized()||l.sequenceNumber>=3){var Z=Promise,P=Z.resolve,H=null;if(M.videoData.o0){var J=g.uyG(M);if(J){H={};var S={};J=J.split("&");J=g.v(J);for(var O=J.next();!O.done;O=J.next())O=O.value.split("="),O.length===2&&(S[O[0]]=O[1]);S.r1a&&(H.webResponse=S.r1a);S.r1c&&(H.error=rzP[Number(S.r1c)]);H.challenge=M.videoData.o0}}l.attestationResponse=P.call(Z,H||void 0)}},N1T=function(l){var M=l.getVideoData();
if(!g.ox(l.getVideoData())||M.EY)return!1;if(M.V){l=M.V.flavor==="playready"&&M.N("html5_innertube_heartbeats_for_playready");var Z=M.V.flavor==="widevine"&&M.N("html5_innertube_heartbeats_for_widevine");M=g.Z5(M.V)&&M.N("html5_innertube_heartbeats_for_fairplay");return!(l||Z||M)}return!0},CCs=function(l){if(N1T(l))return!!l.heartbeatParams;
var M=l.getVideoData();return!g.ox(l.getVideoData())||M.iI||M.nQ?!!M.heartbeatToken:!1},on=function(l,M){if(!l.T.isActive()&&l.J){var Z=l.getVideoData();
if(CCs(l)||Z.isLivePlayback){if(M===void 0)if(l.V)if(l.X)M=7500;else{var P;M=((P=l.heartbeatParams)==null?0:P.interval)?l.heartbeatParams.interval*1E3:l.getVideoData().bK||6E4}else M=1E3;l.T.start(M)}}},PJs=function(l,M,Z){M.ol&&(Z=g.wb(Z,{internalipoverride:M.ol}));
var P={cpn:M.clientPlaybackNonce};M.contextParams&&(P.context_params=M.contextParams);M.l7&&(P.kpt=M.l7);Z=g.wb(Z,P);g.bN(Z,{format:"RAW",method:"GET",timeout:3E4,onSuccess:function(H){if(!l.T.isActive()&&B_(l)){l.j.reset();l.sequenceNumber++;H=H.responseText;var J=lFs(H);if(J){l.player.Lf("onHeartbeat",J);var S=J.status==="ok"?J.stop_heartbeat?2:0:J.status==="stop"?1:J.status==="live_stream_offline"?0:-1}else S=(S=H.match(MfO))?S[1]==="0"?0:1:-1;Z6s(l,void 0,J,H,S)}},
onError:function(H){B_(l)&&kS(l,!0,"net-"+H.status)},
onTimeout:function(){B_(l)&&kS(l,!0,"timeout")},
withCredentials:!0})},hhT=function(l){var M,Z;
g.t(function(P){M=l.player.C();Z=l.getVideoData();if(!B_(l))return P.return();if(N1T(l))return H6S(l,M,Z),P.QS(0);qHo(l);return g.L(P,Jup(l,M,Z),0)})},H6S=function(l,M,Z){var P;
if((P=l.heartbeatParams)!=null&&P.url){var H=g.wb(l.heartbeatParams.url,{request_id:g.koW()});Z.nf&&(H=g.wb(H,{vvt:Z.nf}),Z.mdxEnvironment&&(H=g.wb(H,{mdx_environment:Z.mdxEnvironment})));g.IH(M,Z.oauthToken).then(function(J){J&&(H=g.wb(H,{access_token:J}));PJs(l,Z,H)})}},B_=function(l){var M=l.getVideoData();
return l.player.getPresentingPlayerType()===3||g.Q(l.player.getPlayerStateObject(l.getPlayerType()),4)?!1:CCs(l)||M.isLivePlayback?!0:(b$(l),!1)},Jup=function(l,M,Z){var P,H,J,S,O,Y,z,R,e,I,m,n,T,y,K,x,w,d,V,W;
return g.t(function(F){if(F.T==1)return P="player/heartbeat",J={videoId:Z.videoId,sequenceNumber:l.sequenceNumber,heartbeatServerData:(H=l.Ta)!=null?H:Z.heartbeatServerData},l.D=l.attestationResponse,Z.g7?g.L(F,l.D,3):F.QS(2);F.T!=2&&(J.attestationResponse=F.U);S=g.eM(Z);Y=(O=S.client)!=null?O:{};Y.utcOffsetMinutes=l.utcOffsetMinutes;J.context=S;J.cpn=Z.clientPlaybackNonce;if(z=typeof Intl!=="undefined"?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)Y.timeZone=z;R={heartbeatChecks:[]};
if(e=Z.getPlayerResponse())Z.heartbeatToken&&(J.heartbeatToken=Z.heartbeatToken),(I=e.playabilityStatus)&&(m=I.liveStreamability)&&m.liveStreamabilityRenderer&&R.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_LIVE_STREAM_STATUS");Z.heartbeatToken&&R.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_YPC");g.tc(M)&&(R.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_UNPLUGGED"),n=SFo(l),T={},n!==null&&(T.clientPlayerPositionUtcMillis=n),K=(y=l.player.nJ())==null?void 0:g.a7(y),w=((x=K)==null?void 0:x.freePreviewWatchedDuration)||
0,w>0&&(T.freePreviewWatchedDuration={seconds:""+w}),R.unpluggedParams=T);J.heartbeatRequestParams=R;Z.isLivePlayback?(d=SFo(l),d!==null&&(J.playbackState||(J.playbackState={}),J.playbackState.playbackPosition={utcTimeMillis:d})):M.N("enable_heartbeat_vod_playback_position")&&(V=Gfq(l),V!==null&&(J.playbackState||(J.playbackState={}),J.playbackState.playbackPosition={streamTimeMillis:V}));l.player.publish("heartbeatRequest",J);W={timeout:3E4,onSuccess:function(Zu){if(!l.T.isActive()&&B_(l)){var HT=
l.getVideoData(),lE=HT.g7&&l.D==null,SX;HT.g7=!((SX=Zu.heartbeatAttestationConfig)==null||!SX.requiresAttestation)||lE;lE=Zu.playabilityStatus;SX=JSON.stringify(lE)||"{}";Zu.authenticationMismatch&&l.player.Kf("authshear",{});var r=-1;var sE=Zu.playabilityStatus;sE&&(l.player.Lf("onHeartbeat",sE),sE.status==="OK"?r=Zu.stopHeartbeat?2:0:sE.status==="UNPLAYABLE"?r=1:sE.status==="LIVE_STREAM_OFFLINE"&&(r=0));l.sequenceNumber&&r===-1||l.j.reset();l.sequenceNumber++;Zu.heartbeatServerData&&(l.Ta=Zu.heartbeatServerData);
HT.pQ=Zu;(sE=Zu.playerCueRangeSet)&&g.Hx(HT,sE);Zu.playerCueRanges&&Zu.playerCueRanges.length>0&&(HT.cueRanges=Zu.playerCueRanges);var xK,dW;((xK=Zu.progressBarConfig)==null?0:xK.progressBarStartPosition)&&((dW=Zu.progressBarConfig)==null?0:dW.progressBarEndPosition)&&(HT.progressBarStartPosition=Zu.progressBarConfig.progressBarStartPosition,HT.progressBarEndPosition=Zu.progressBarConfig.progressBarEndPosition);HT.compositeLiveIngestionOffsetToken=Zu.compositeLiveIngestionOffsetToken;Zu.compositeLiveStatusToken!==
HT.compositeLiveStatusToken&&(HT.compositeLiveStatusToken=Zu.compositeLiveStatusToken);HT.publish("dataupdated");Z6s(l,Zu,lE,SX,r)}},
onError:function(Zu){B_(l)&&kS(l,!0,"net-"+Zu.status)},
onTimeout:function(){B_(l)&&kS(l,!0,"timeout")}};
g.IH(M,g.QQ(Z)).then(function(Zu){Zu&&(W.yR="Bearer "+Zu);g.Jh(l.EE,P,J,W)});
g.$K(F)})},Z6s=function(l,M,Z,P,H){H===-1?(Z="decode "+g.Ow(P,3),kS(l,!1,Z)):H===2?(b$(l),l.V=!0):(l.Z=0,l.T.stop(),H===1?(l.V=!1,Z&&Z.errorCode==="PLAYABILITY_ERROR_CODE_EMBARGOED"&&l.player.Ai(!0),H="pe."+(Z==null?void 0:Z.errorCode)+";ps."+(Z==null?void 0:Z.status),l.player.nU("heartbeat.stop",2,l.yI(P),H),g.mQ("heartbeatActionPlayerHalted",O6p(Z)),(M==null?0:M.videoTransitionEndpoint)&&Z&&(M=M.videoTransitionEndpoint,(P=g.u(M,g.S6))&&YFq(l,P,Z,{itct:M==null?void 0:M.clickTrackingParams}))):(l.V=
!0,P=0,l.X&&Z&&(P=Q_o(l,M,Z),l.player.publish("livestatedata",Z)),P?on(l,P):on(l)))},Q_o=function(l,M,Z){var P=Z.liveStreamability&&Z.liveStreamability.liveStreamabilityRenderer,H=!(!P||!(P.switchStreamsImmediately||P.transitionTiming&&P.transitionTiming==="STREAM_TRANSITION_TIMING_IMMEDIATELY"));
M=z2s(l,M,P);var J=l.getVideoData(),S=l.player.getPlayerStateObject(l.getPlayerType()),O=S.isPlaying()&&!g.dZ(J)&&!l.player.isAtLiveHead(l.getPlayerType());if(J.C().Jd()){var Y,z=((Y=l.player.y9())==null?void 0:Y.HS())||{};z.status=Z.status||"";z.dvr=""+ +O;z["switch"]=""+ +H;z.ended=""+ +!(!P||!P.displayEndscreen);l.player.Kf("heartbeat",z)}Y=l.player.N("always_cache_redirect_endpoint");if(O&&!H&&!Y)return M;z=P&&P.streamTransitionEndpoint&&g.u(P.streamTransitionEndpoint,g.S6);var R=P&&P.transitionTiming;
if(R==="STREAM_TRANSITION_TIMING_AT_STREAM_END")l.getVideoData().transitionEndpointAtEndOfStream=z;else if(Y&&!z&&l.getVideoData().transitionEndpointAtEndOfStream)l.getVideoData().transitionEndpointAtEndOfStream=void 0;else if(!Y&&z&&YFq(l,z,Z))return M;if(O&&!H&&Y||Y&&z&&(R==="STREAM_TRANSITION_TIMING_IMMEDIATELY"||R==="STREAM_TRANSITION_TIMING_UNSPECIFIED")&&YFq(l,z,Z))return M;if(Z.status.toUpperCase()==="OK"){H=P&&P.broadcastId;O=l.U&&l.U.liveStreamability&&l.U.liveStreamability.liveStreamabilityRenderer&&
l.U.liveStreamability.liveStreamabilityRenderer.broadcastId;Y=H!==O&&H!=null;if(!g.wZ(J)||Y){var e={video_id:J.videoId};J.j1&&(e.is_live_destination="1");e.disable_watch_next=!0;e.raw_watch_next_response=J.getWatchNextResponse();e.autonav_state=J.autonavState;e.oauth_token=J.oauthToken;e.jg=J.jg;J.j&&(e.vss_credentials_token=J.j,e.vss_credentials_token_type=J.Yr);J.nf&&(e.vvt=J.nf);P=void 0;g.wZ(J)?Y&&(P=new KD("broadcastIdChanged",O+","+H),l.Lx("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_BROADCAST_ID_CHANGED",
Z)):(H&&(P=new KD("formatsReceived",""+H)),l.Lx("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_LIVE_STREAM_WENT_ONLINE",Z));l.player.loadVideoByPlayerVars(e,void 0,void 0,void 0,P);return M}l.player.Kc("heartbeat",l.getPlayerType())}P&&P.displayEndscreen&&(l.offlineSlate?(l=l.offlineSlate,l.J=!0,l.bv&&l.api.JJ()):S.isBuffering()&&(J=((e=l.player.y9())==null?void 0:e.HS())||{},l.player.Kf("hbse",J,!0),l.player.JJ(),l.player.Lf("onLiveMediaEnded",Z)));return M},z2s=function(l,
M,Z){return l.player.N("web_player_use_heartbeat_poll_delay_ms")&&(l=Number(M==null?void 0:M.pollDelayMs))?l:(Z=Number(Z==null?void 0:Z.pollDelayMs))?Z:0},kS=function(l,M,Z){var P=l.player.C();
if(!l.T.isActive()){l.T.stop();l.Z++;var H=M?"heartbeat.net":"heartbeat.servererror";var J=l.getVideoData();if(J.Sb||M&&!g.ox(l.getVideoData())&&!CCs(l)&&J.isLivePlayback)J=!1;else{var S,O;((O=l.heartbeatParams)==null?0:O.retries)?S=l.heartbeatParams.retries:S=J.rG||5;J=l.Z>=S}J?(g.mQ("heartbeatActionPlayerHalted",M?{enforcedPolicyToHaltOnNetworkFailure:!0}:O6p()),(M=l.getVideoData())&&M.isLivePlayback?l.player.nU(H,1,"Video playback interrupted. Please try again.",Z):l.player.nU(H,1,"Sorry, there was an error licensing this video.",
Z)):(P.N("html5_report_non_fatal_heartbeat_error")&&l.player.Jj(H,{msg:Z}),on(l,l.j.getValue()),g.p1(l.j))}},O6p=function(l){var M={enforcedPolicyToHaltOnNetworkFailure:!1};
l&&(M.serializedServerContext=l.additionalLoggingData);return M},b$=function(l){l.Z=0;
l.T.stop();l.V=!1;l.sequenceNumber=0},FFO=function(l){var M=l.getVideoData(),Z=l.player.C();
if(M.isLivePlayback)if(g.mo(Z.V)){l.X=!0;l.J=!0;if(!g.DN(Z)||g.tc(Z))l.offlineSlate=new uk0(l.player),g.f(l,l.offlineSlate),g.VE(l.player,l.offlineSlate.element,4);(M=M.getPlayerResponse())&&M.playabilityStatus&&(l.U=M.playabilityStatus);var P;((P=l.U)==null?void 0:P.status)!=="UNPLAYABLE"&&(l.U?(P=z2s(l,void 0,l.U.liveStreamability&&l.U.liveStreamability.liveStreamabilityRenderer))?on(l,P):on(l,7500):on(l,1E3))}else l.player.nU("html5.unsupportedlive",2,"HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1");
else g.X0(M.Ta,"heartbeat")&&l.player.Kc("heartbeat",l.getPlayerType())},YFq=function(l,M,Z,P){var H=M&&M.videoId;
return H?(l.player.Lz(H,Object.assign({},{autonav:"1"},P||{}),void 0,!0,!0,M,g.QQ(l.getVideoData())),l.Lx("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT",Z),!0):!1},SFo=function(l){return(l=l.player.getProgressState(l.getPlayerType()).ingestionTime)&&isFinite(l)?""+Math.floor(l*1E3):null},Gfq=function(l){return(l=l.player.getCurrentTime(l.getPlayerType()))&&isFinite(l)?""+Math.floor(l*1E3):null},lFs=function(l){try{var M=JSON.parse(l);
return M!=null?M:void 0}catch(Z){}},R2P={ERAS:["BC",
"AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, y",
"MMMM d, y","MMM d, y","M/d/yy"],TIMEFORMATS:["h:mm:ss\u202fa zzzz","h:mm:ss\u202fa z","h:mm:ss\u202fa","h:mm\u202fa"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:6,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:5},e2p=R2P;e2p=R2P;
var rzP=["ATTESTATION_ERROR_UNKNOWN","ATTESTATION_ERROR_VM_NOT_INITIALIZED","ATTESTATION_ERROR_VM_NO_RESPONSE","ATTESTATION_ERROR_VM_TIMEOUT","ATTESTATION_ERROR_VM_INTERNAL_ERROR"],IFP={300:"STREAMING_DEVICES_QUOTA_PER_24H_EXCEEDED",301:"ALREADY_PINNED_ON_A_DEVICE",303:"STOPPED_BY_ANOTHER_PLAYBACK",304:"TOO_MANY_STREAMS_PER_USER",305:"TOO_MANY_STREAMS_PER_ENTITLEMENT",400:"VIDEO_NOT_FOUND",401:"GEO_FAILURE",402:"STREAMING_NOT_ALLOWED",403:"UNSUPPORTED_DEVICE",405:"VIDEO_FORBIDDEN",500:"PURCHASE_NOT_FOUND",
501:"RENTAL_EXPIRED",502:"PURCHASE_REFUNDED",5E3:"BAD_REQUEST",5001:"CGI_PARAMS_MISSING",5002:"CGI_PARAMS_MALFORMED",5100:"AUTHENTICATION_MISSING",5101:"AUTHENTICATION_MALFORMED",5102:"AUTHENTICATION_EXPIRED",5200:"CAST_TOKEN_MALFORMED",5201:"CAST_TOKEN_EXPIRED",5202:"CAST_TOKEN_FAILED",5203:"CAST_SESSION_VIDEO_MISMATCHED",5204:"CAST_SESSION_DEVICE_MISMATCHED",6E3:"INVALID_DRM_MESSAGE",7E3:"SERVER_ERROR",8E3:"RETRYABLE_ERROR"};g.X=a0P.prototype;g.X.a8=e2p.FIRSTDAYOFWEEK;g.X.NV=e2p.FIRSTWEEKCUTOFFDAY;
g.X.clone=function(){var l=new a0P(this.date);l.a8=this.a8;l.NV=this.NV;return l};
g.X.getFullYear=function(){return this.date.getFullYear()};
g.X.getYear=function(){return this.getFullYear()};
g.X.getMonth=function(){return this.date.getMonth()};
g.X.getDate=function(){return this.date.getDate()};
g.X.getTime=function(){return this.date.getTime()};
g.X.getDay=function(){return this.date.getDay()};
g.X.getUTCFullYear=function(){return this.date.getUTCFullYear()};
g.X.getUTCMonth=function(){return this.date.getUTCMonth()};
g.X.getUTCDate=function(){return this.date.getUTCDate()};
g.X.getUTCDay=function(){return this.date.getDay()};
g.X.getUTCHours=function(){return this.date.getUTCHours()};
g.X.getUTCMinutes=function(){return this.date.getUTCMinutes()};
g.X.getTimezoneOffset=function(){return this.date.getTimezoneOffset()};
g.X.set=function(l){this.date=new Date(l.getFullYear(),l.getMonth(),l.getDate())};
g.X.setFullYear=function(l){this.date.setFullYear(l)};
g.X.setYear=function(l){this.setFullYear(l)};
g.X.setMonth=function(l){this.date.setMonth(l)};
g.X.setDate=function(l){this.date.setDate(l)};
g.X.setTime=function(l){this.date.setTime(l)};
g.X.setUTCFullYear=function(l){this.date.setUTCFullYear(l)};
g.X.setUTCMonth=function(l){this.date.setUTCMonth(l)};
g.X.setUTCDate=function(l){this.date.setUTCDate(l)};
g.X.add=function(l){if(l.years||l.months){var M=this.getMonth()+l.months+l.years*12,Z=this.getYear()+Math.floor(M/12);M%=12;M<0&&(M+=12);a:{switch(M){case 1:var P=Z%4!=0||Z%100==0&&Z%400!=0?28:29;break a;case 5:case 8:case 10:case 3:P=30;break a}P=31}P=Math.min(P,this.getDate());this.setDate(1);this.setFullYear(Z);this.setMonth(M);this.setDate(P)}l.days&&(Z=this.getYear(),M=Z>=0&&Z<=99?-1900:0,l=new Date((new Date(Z,this.getMonth(),this.getDate(),12)).getTime()+l.days*864E5),this.setDate(1),this.setFullYear(l.getFullYear()+
M),this.setMonth(l.getMonth()),this.setDate(l.getDate()),T$(this,l.getDate()))};
g.X.equals=function(l){return!(!l||this.getYear()!=l.getYear()||this.getMonth()!=l.getMonth()||this.getDate()!=l.getDate())};
g.X.toString=function(){var l=this.getFullYear(),M=l<0?"-":l>=1E4?"+":"";return[M+B1k(Math.abs(l),M?6:4),B1k(this.getMonth()+1,2),B1k(this.getDate(),2)].join("")+""};
g.X.valueOf=function(){return this.date.valueOf()};var mmq=new g.wI("addUpcomingEventReminderEndpoint");var ncs=new g.wI("removeUpcomingEventReminderEndpoint");var skP=new g.wI("updateUpcomingEventReminderButtonStateCommand");var dZo=new g.wI("upcomingEventReminderButtonRenderer"),VNE=new g.wI("upcomingEventReminderButtonStateRenderer");g.c(y7,g.ie);
y7.prototype.updateMenuItems=function(){var l=this,M=LFO(this),Z=0;Z=0;for(var P={};Z<M.length;P={CS:void 0},Z++){var H=this.K[Z];H||(H=new g.q({W:"div",B:"ytp-reminder-menu-item",Y:{role:"menuitem",tabindex:"0"},L:[{W:"div",B:"ytp-reminder-menu-item-icon",b1:"{{icon}}"},{W:"div",B:"ytp-reminder-menu-item-label",b1:"{{text}}"}]}),P.CS=Z,H.listen("click",function(S){return function(){var O=S.CS;l.j$();O=LFO(l)[O];l.publish("reminderMenuItemClicked",O.serviceEndpoint||O.command)}}(P)),H.o3(this.items),
this.K[Z]=H);
var J=M[Z];P=null;switch(J.icon&&J.icon.iconType){case "NOTIFICATIONS":P=kc0();break;case "NOTIFICATIONS_NONE":P=bBp();break;case "NOTIFICATIONS_ACTIVE":P=g.wD()}J=J.text?g.yd(J.text):"";H.update({icon:P,text:J})}for(;Z<this.K.length;)this.K.pop().dispose();Z===0?this.j$():this.GN(this.U)};
y7.prototype.hide=function(){this.U&&this.U.removeAttribute("aria-haspopup");g.ie.prototype.hide.call(this)};
y7.prototype.show=function(){this.U&&this.U.setAttribute("aria-haspopup","true");g.ie.prototype.show.call(this)};
y7.prototype.u1=function(){g.sH(this.K);g.ie.prototype.u1.call(this)};g.c(ES,g.q);
ES.prototype.J=function(){if(this.toggleButtonRenderer){var l=this.toggleButtonRenderer;l.isToggled?this.K(l.toggledServiceEndpoint):this.K(l.defaultServiceEndpoint);l.isToggled=!l.isToggled;xS(this)}else if(this.upcomingEventReminderButtonRenderer)if(this.U&&this.U.bv)this.U.j$();else{var M=DZl(this);M&&this.K(M.serviceEndpoint||M.command);M=((l=g.u(M==null?void 0:M.command,g.xR))==null?void 0:l.commands)||[];a:{l=g.v(M);for(var Z=l.next();!Z.done;Z=l.next()){var P=M=void 0;if(Z=(M=g.u(Z.value,g.f_p))==
null?void 0:(P=M.popup)==null?void 0:P.menuPopupRenderer){l=Z;break a}}l=void 0}this.U||(this.U=new y7(this.S,this.j),this.U.o3(this.element),g.f(this,this.U),this.U.subscribe("reminderMenuItemClicked",this.K,this));M=this.U;M.menuPopupRenderer=l;M.updateMenuItems()}};
ES.prototype.K=function(l){var M=g.u(l,mmq),Z=g.u(l,ncs);if(l&&(M||Z)){if(M){var P=M;var H="notification/add_upcoming_event_reminder"}else Z&&(P=Z,H="notification/remove_upcoming_event_reminder");if(H&&P&&P.params)for(j_q(this,H,P.params),l=g.v(P.commands||[]),M=l.next();!M.done;M=l.next())if((M=M.value)&&g.u(M,skP)){this.T=g.u(M,skP).state;xS(this);break}}};g.c(uk0,g.q);g.X=uk0.prototype;g.X.getPlayerType=function(){if(this.api.getPresentingPlayerType()===8)return 1};
g.X.getVideoData=function(){return this.api.getVideoData(this.getPlayerType())};
g.X.Ga=function(l){var M,Z,P=l==null?void 0:(M=l.liveStreamability)==null?void 0:(Z=M.liveStreamabilityRenderer)==null?void 0:Z.offlineSlate;if(P){this.T=l;M=P.liveStreamOfflineSlateRenderer;M.canShowCountdown?this.BT():ppl(this,M);var H,J,S,O;if(Z=l==null?void 0:(H=l.liveStreamability)==null?void 0:(J=H.liveStreamabilityRenderer)==null?void 0:(S=J.offlineSlate)==null?void 0:(O=S.liveStreamOfflineSlateRenderer)==null?void 0:O.thumbnail){H=0;J=null;S=Z.thumbnails;for(O=0;O<S.length;O++)S[O].width>
H&&(H=S[O].width||0,J=S[O].url);J&&(this.background.style.backgroundImage="url("+J+")")}else this.background.style.backgroundImage="";M.actionButtons||M.reminderButton?(this.U||(this.U=new ES(this.api),this.U.o3(this.I3("ytp-offline-slate-buttons")),g.f(this,this.U)),tNs(this.U,M.actionButtons&&M.actionButtons[0],M.reminderButton)):this.U&&tNs(this.U,null,null);this.T=l}else this.T=null;this.fN()};
g.X.fN=function(l){if(this.api.getPresentingPlayerType()===8)var M=!0;else{var Z=this.api.getPlayerStateObject(),P=this.getVideoData();M=P.isLivePlayback&&(Z.isBuffering()||g.Q(Z,2)||g.Q(Z,64));var H=P.autonavState===2&&g.Q(Z,2);Z=Z.isPlaying()&&!g.dZ(P)&&!this.api.isAtLiveHead(void 0,!0);M=M&&!Z&&!H}M&&this.T?this.bv?(l==null?0:g.yo(l,2))&&!this.getVideoData().Dv&&(g.m0(this.element,"ytp-offline-slate-collapsed"),this.X.stop(),g.m0(this.K,"ytp-offline-slate-bar-fade"),this.j.start()):(this.show(),
this.X.start(),this.api.publish("offlineslatestatechange"),this.J&&this.api.JJ()):this.bv&&(this.hide(),this.api.publish("offlineslatestatechange"))};
g.X.BT=function(){var l,M,Z,P,H=(l=this.T)==null?void 0:(M=l.liveStreamability)==null?void 0:(Z=M.liveStreamabilityRenderer)==null?void 0:(P=Z.offlineSlate)==null?void 0:P.liveStreamOfflineSlateRenderer;H&&(l=Math.floor(g.GT()/1E3),M=H.canShowCountdown&&Number(H.scheduledStartTime),!M||M<=l?(ppl(this,H),this.countdownTimer.stop()):(ppl(this,H,g.am(M-l)),g.PB(this.countdownTimer)))};
g.X.u1=function(){this.countdownTimer.dispose();this.countdownTimer=null;g.q.prototype.u1.call(this)};KD.prototype.T=function(l){return this.trigger&&l.trigger?this.trigger===l.trigger&&this.U===l.U:!1};
KD.prototype.isExpired=function(){return(0,g.h)()-this.K>6E4};
KD.prototype.toString=function(){return"heartbeat:"+this.trigger+":"+this.U};g.c(WFl,g.v5);g.X=WFl.prototype;g.X.u1=function(){b$(this);this.player.wc("heartbeat");g.v5.prototype.u1.call(this)};
g.X.onCueRangeEnter=function(){this.J=!0;on(this,2E3)};
g.X.l2=function(l){this.heartbeatParams=l;on(this,2E3)};
g.X.uT=function(l){var M;this.player.getPresentingPlayerType()!==8&&((M=this.U)==null?void 0:M.status)!=="UNPLAYABLE"&&(g.Q(l.state,2)||g.Q(l.state,64)?(b$(this),this.X&&(this.J=!0,on(this,1E3))):(g.Q(l.state,1)||g.Q(l.state,8))&&on(this,2E3))};
g.X.Xv=function(){this.player.getPresentingPlayerType()!==3&&on(this,2E3)};
g.X.getPlayerType=function(){if(this.player.getPresentingPlayerType()===8)return 1};
g.X.getVideoData=function(){return this.player.getVideoData(this.getPlayerType())};
g.X.lG=function(l){switch(l){case 4:case 3:return!1}return!0};
g.X.Lx=function(l,M,Z){l={trigger:l,reason:M};Z&&(l.serializedServerContext=Z.additionalLoggingData);g.mQ("heartbeatActionPlayerTransitioned",l)};
g.X.yI=function(l){var M="LICENSE",Z=lFs(l);if(Z)return Z.reason||g.pz[M]||"";if(l=l.match(MfO))if(l=Number(l[1]))M=(M=IFP[l.toString()])?M:"LICENSE";return g.pz[M]||""};
g.X.Wb=function(){return!!this.offlineSlate&&this.offlineSlate.bv};
var MfO=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.gT("heartbeat",WFl);})(_yt_player);
